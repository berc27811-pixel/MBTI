# MBTI网站管理员安全指南

## 🔒 安全访问方式

### 方法一：URL密钥访问（推荐）
使用以下格式访问管理后台：
```
https://mbti.dewater.icu/admin.html?key=您的安全密钥
```

**默认安全密钥（请立即修改）：**
- 主密钥：`mbti2025_admin_secret_key`
- 备用密钥：`mbti_dewater_icu_secure_2025`
- 备用密钥：`backup_key_mbti_2025_secure`

### 方法二：直接访问（已禁用）
直接访问 `admin.html` 会被拒绝，必须使用密钥参数。

## 🛡️ 安全配置建议

### 1. 修改默认密钥
在 `admin.js` 文件中修改 `isValidKey` 函数中的密钥：

```javascript
function isValidKey(key) {
  const validKeys = [
    '您的新复杂密钥1',  // 替换为您的自定义密钥
    '您的新复杂密钥2',  // 建议使用32位以上随机字符串
    '您的备用密钥3'
  ];
  return validKeys.includes(key);
}
```

### 2. 创建强密码的要点
- 长度至少16位
- 包含大小写字母、数字、特殊符号
- 避免使用常见词汇
- 定期更换密钥

**示例强密钥：**
```
MBTI@Dewater_ICU_2025!Secure#Key$
mBtI_d3w4t3r_1cU_S3cur3_K3y_2025
```

### 3. 宝塔面板安全设置

#### 文件权限设置
```bash
# 设置文件权限（在宝塔面板中操作）
admin.html - 644
admin.js - 644
admin-config.js - 600 (如果使用)
```

#### Nginx安全配置
在宝塔面板的网站设置中添加：

```nginx
# 防止直接访问admin.html
location = /admin.html {
    if ($args !~* "key=") {
        return 403;
    }
}

# 隐藏服务器信息
server_tokens off;
```

## 📋 部署检查清单

### 上传前检查
- [ ] 修改默认安全密钥
- [ ] 删除或重命名 `admin-config.js`（如不使用）
- [ ] 确认管理入口已从首页隐藏
- [ ] 测试URL密钥访问方式

### 宝塔面板配置
- [ ] 上传所有文件到网站根目录
- [ ] 设置正确的文件权限
- [ ] 配置域名指向
- [ ] 启用HTTPS（推荐）

### 安全测试
- [ ] 直接访问 `admin.html` 应显示拒绝页面
- [ ] 使用密钥访问应正常进入后台
- [ ] 测试移动端访问
- [ ] 验证会话过期功能

## 🔐 高级安全选项（可选）

### 1. IP白名单限制
在 `admin.js` 中添加IP验证：

```javascript
function checkIP() {
  const allowedIPs = ['您的IP地址'];
  // 需要后端支持获取真实IP
}
```

### 2. 双因素认证
可集成Google Authenticator等工具。

### 3. 访问日志
启用访问日志记录管理操作。

## ⚠️ 安全注意事项

1. **不要分享密钥**：每个管理员使用独立密钥
2. **定期更换密钥**：建议每3个月更换一次
3. **监控访问日志**：定期检查异常访问
4. **备份数据**：定期备份管理数据
5. **及时更新**：关注安全更新

## 📞 技术支持

如遇安全问题，请联系：zhiji@mbti.ink

---

**最后更新：2025年1月**  
*请妥善保管此文档，避免泄露安全信息*